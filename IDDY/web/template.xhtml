<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title><ui:insert name="title">Default Title</ui:insert></title>
        <!-- CSS -->
        <!--<h:outputStylesheet library="css" name="jsfcrud.css"/>-->
        <h:outputStylesheet library="css" name="bootstrap.css"/>
        <h:outputStylesheet library="css" name="iddy.css" />
        <!-- JS -->
        <h:outputScript library="js" name="jquery-3.1.1.slim.min.js" />
        <h:outputScript library="js" name="tether.min.js" />
        <h:outputScript library="js" name="bootstrap.min.js" />
    </h:head>

    <h:body class="bg-faded">
        <nav class="navbar navbar-toggleable-md navbar-light bg-primary">
            <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarColor02" aria-controls="navbarColor02" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <h:link class="navbar-brand" outcome="/index.xhtml" value="IDDY"/>
            <div class="collapse navbar-collapse" id="navbarColor02">
                <ul class="navbar-nav mr-auto">
                    <h:panelGroup rendered="#{!request.isUserInRole('default_user_role')}">
                        <li class="nav-item">
                            <h:link class="nav-link" outcome="/login.xhtml" value="Connexion"/>
                        </li>
                        <li class="nav-item">
                            <h:link class="nav-link" outcome="/register.xhtml" value="Inscription"/>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{request.isUserInRole('default_user_role')}">
                        <li class="nav-item">
                            <h:link class="nav-link" outcome="/default/index.xhtml" value="Dashboard"/>
                        </li>
                        <li class="nav-item">
                            <h:link class="nav-link" outcome="/default/users.xhtml" value="Utilisateurs"/>
                        </li>
                        <li class="nav-item">
                            <h:link class="nav-link" outcome="/default/new_challenge.xhtml" value="Créer un nouveau défi"/>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{request.isUserInRole('admin_role')}">
                        <li class="nav-item">
                            <h:link class="nav-link" outcome="/admin/index.xhtml" value="Administration"/>
                        </li>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{request.isUserInRole('default_user_role')}">
                        <li class="nav-item">
                            <h:form>
                                <li><h:commandLink action="#{usersController.logout()}" class="nav-link" style="color:red;" value="Déconnexion"/></li>
                            </h:form>
                        </li>
                    </h:panelGroup>
                </ul>
            </div>
        </nav>
        <h:panelGroup class="mb-4" id="messagePanel" layout="block">
            <h:messages errorStyle="color: red" infoStyle="color: green" layout="table"/>
        </h:panelGroup>
        <ui:insert name="body">Default Body</ui:insert>
    </h:body>

</html>
